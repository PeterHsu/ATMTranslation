<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>ATM</title>
	<link rel="stylesheet" href="css/KoGrid.css" />
	<script src="js/jquery-1.8.2.min.js"></script>
	<script src="js/linq.min.js"></script>
	<script src="js/knockout-2.2.0.js"></script>
	<script src="js/koGrid-2.1.1.js"></script>
	<script src="js/ATM.js"></script>
	<script>
		$(function(){
			//var rawData = "4E43524930323031333131343534343031303032303030303030303030313030333139323801301338313530303031363130303636363533383030133831353030303136313030363636353338303000000000783030303030303030303030303030303038313530303031363130303636363533383030202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000F930303030303537303030303030303030323031333031333131343534353036303131303136303030383031323030303030303030303030303030303030303030000A937741753EBBECA00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000430303030053034313832";
			var rawData = "343031303230303239300D30303030303030303030303030133831353030313032323632373531393030303013383135303031303232363237353139303030300000001A303030303030303030303030303030303030303030303833302B1A303030303030303030303030303030303030303030303833302B043030303001300000000069303831353030313032323632373531393030303020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020073030303030303000";
			$("#code").val(rawData);
			$(window).resize(window_resize).resize();
			$(document).on("click","#translate",function() {
				viewModel.Code(ATMParse($("#code").val()));
			})
			var viewModel = new AppViewModel();
			ko.applyBindings(viewModel);
		})
		function window_resize() {
			$(".gridStyle").css("height",function(){return $(window).height() - 180;});
		}
		function AppViewModel() {
			this.Code = ko.observableArray([]);
			this.gridOptions = {
				data:this.Code,
				footerVisible:false,
				showColumnMenu:false,
				showFilter:false,
				displaySelectionCheckbox:false,
				multiSelect:false,
				enableSorting:false,
				columnDefs:[{field:'key',displayName:'欄位名稱',width:'150px'},
				{field:'value',displayName:'內容',width:'350px'},
				{field:'index',displayName:'起始',width:'50px'},
				{field:'length',displayName:'長度',width:'50px'},
				{field:'hex',displayName:'原始碼'}]
			}
		}
	</script>
</head>
<body>
	<label for="code">電文</label><input type="button" id="translate" value="電文解析" /><span id="msg"></span><br>
	<textarea id="code" style="resize:none;width:100%;height:100px"></textarea>
	<div class="gridStyle" data-bind="koGrid: gridOptions"></div>
</body>
</html>